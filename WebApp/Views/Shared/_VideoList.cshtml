@using WebApp.Models.UploadedFileModel
@model WebApp.Models.UserModel.User

@{
    var videos = ViewBag.Videos as List<UploadedFile>;
    var currentPage = Convert.ToInt32(ViewData["CurrentPage"] ?? 1);
}


@if (videos != null && videos.Count > 0)
{
    <form asp-controller="File" asp-action="DeleteMultipleFiles" asp-route-userId="@Model.Id" asp-route-page="@currentPage" method="post">
        <table class="table">
            <thead>
                <tr class="text-center">
                    <th>Select</th>
                    <th>Video Name</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var video in videos)
                {
                    <tr class="text-center">
                        <td><input type="checkbox" name="selectedFiles" value="@video.FileName" /></td>
                        <td>
                            <a asp-controller="Video" asp-action="Play" asp-route-id="@video.Id">@video.FileName</a>
                        </td>
                        <td class="align-middle">
                            @* <a asp-controller="File" asp-action="DeleteFile" asp-route-fileName=@video.FileName asp-route-userId=@Model.Id asp-route-page=@currentPage method="post" style="display: inline; color: red;" onclick="return confirm('Are you sure you want to delete this file?');">
                                <i class="bi bi-trash"></i>
                            </a> *@
                            <a href="#" style="display: inline; color: red;">
                                <i id="deleteBtn" data-userid="@Model.Id" data-filename="@video.FileName" class="bi bi-trash"></i>
                            </a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
            <button type="submit" class="btn btn-danger bi bi-trash">Deleted selected files</button>
    </form>
}else
{
    <div class="alert alert-info">No video found for this user.</div>
}